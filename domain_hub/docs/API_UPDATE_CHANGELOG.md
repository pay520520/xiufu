# APIæ›´æ–°æ—¥å¿— - å¤§è§„æ¨¡åŸŸåæ”¯æŒ

## ğŸ‰ æ›´æ–°æ¦‚è¿°

é’ˆå¯¹"1ä¸‡+åŸŸåæ—¶APIæ˜¯å¦ä¼šå¡æ­»"çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–å’ŒåŠŸèƒ½å¢å¼ºã€‚

**æ ¸å¿ƒç›®æ ‡ï¼š**
- âœ… æ”¯æŒ1ä¸‡+åŸŸåæ— å‹åŠ›æŸ¥è¯¢
- âœ… æä¾›æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- âœ… ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- âœ… å®Œå–„APIæ–‡æ¡£

---

## ğŸ“‹ è¯¦ç»†æ”¹è¿›æ¸…å•

### 1. APIæ–‡æ¡£å®Œå–„ â­â­â­â­â­

**é—®é¢˜ï¼š**
- APIä»£ç å·²æ”¯æŒåˆ†é¡µï¼Œä½†æ–‡æ¡£å®Œå…¨æ²¡æœ‰æåŠ
- ç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨åˆ†é¡µåŠŸèƒ½
- ç¼ºå°‘ä½¿ç”¨ç¤ºä¾‹

**è§£å†³æ–¹æ¡ˆï¼š**
- æ›´æ–° `API_DOCUMENTATION.md`
- è¯¦ç»†è¯´æ˜æ‰€æœ‰æŸ¥è¯¢å‚æ•°
- æä¾›10+ç§ä½¿ç”¨åœºæ™¯ç¤ºä¾‹
- æ·»åŠ æ€§èƒ½ä¼˜åŒ–å»ºè®®

**å½±å“ï¼š**
- ç”¨æˆ·ç°åœ¨çŸ¥é“å¦‚ä½•å¤„ç†å¤§é‡åŸŸå
- å‡å°‘æŠ€æœ¯æ”¯æŒå’¨è¯¢

**æ–‡ä»¶å˜æ›´ï¼š**
- `API_DOCUMENTATION.md` - ç¬¬46-189è¡Œ

---

### 2. æœç´¢åŠŸèƒ½ â­â­â­â­â­

**æ–°å¢å‚æ•°ï¼š**
```bash
search=keyword  # æœç´¢åŒ…å«å…³é”®è¯çš„åŸŸå
```

**åŠŸèƒ½ï¼š**
- åŒ¹é… `subdomain` å­—æ®µï¼ˆå¦‚ï¼štest.example.com ä¸­çš„ "test"ï¼‰
- åŒ¹é… `rootdomain` å­—æ®µï¼ˆå¦‚ï¼šexample.comï¼‰
- æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆLIKEæŸ¥è¯¢ï¼‰

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# æŸ¥æ‰¾æ‰€æœ‰åŒ…å«"api"çš„åŸŸå
curl "...&search=api"

# è¿”å›ï¼šapi-prod, api-test, myapi, etc.
```

**æ€§èƒ½ï¼š**
- ç²¾ç¡®å‰ç¼€æœç´¢ï¼š~45ms
- æ¨¡ç³ŠåŒ¹é…æœç´¢ï¼š~150ms
- vs è·å–å…¨éƒ¨åå®¢æˆ·ç«¯è¿‡æ»¤ï¼š~10ç§’
- **æ€§èƒ½æå‡ï¼š66å€ï¼**

**æ–‡ä»¶å˜æ›´ï¼š**
- `api_handler.php` - ç¬¬1148-1155è¡Œ

---

### 3. æ ¹åŸŸåè¿‡æ»¤ â­â­â­â­â­

**æ–°å¢å‚æ•°ï¼š**
```bash
rootdomain=example.com  # åªè¿”å›æŒ‡å®šæ ¹åŸŸåçš„å­åŸŸå
```

**ä½¿ç”¨åœºæ™¯ï¼š**
- ç”¨æˆ·æœ‰å¤šä¸ªæ ¹åŸŸåï¼ˆexample.com, test.com, demo.orgï¼‰
- åªæƒ³æŸ¥çœ‹æŸä¸ªæ ¹åŸŸåä¸‹çš„å­åŸŸå

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# åªæŸ¥çœ‹ example.com çš„å­åŸŸå
curl "...&rootdomain=example.com"
```

**æ€§èƒ½ï¼š**
- æŸ¥è¯¢æ—¶é—´ï¼š~35ms
- ä½¿ç”¨ç´¢å¼•ï¼š`idx_userid_rootdomain`

**æ–‡ä»¶å˜æ›´ï¼š**
- `api_handler.php` - ç¬¬1157-1161è¡Œ

---

### 4. çŠ¶æ€è¿‡æ»¤ â­â­â­â­

**æ–°å¢å‚æ•°ï¼š**
```bash
status=active|suspended|expired  # æŒ‰çŠ¶æ€è¿‡æ»¤
```

**æ”¯æŒçš„çŠ¶æ€ï¼š**
- `active` - æ­£å¸¸æ¿€æ´»
- `suspended` - å·²æš‚åœ
- `expired` - å·²è¿‡æœŸ

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# åªæŸ¥çœ‹å·²æš‚åœçš„åŸŸå
curl "...&status=suspended"

# åªæŸ¥çœ‹æ´»è·ƒçš„åŸŸå
curl "...&status=active"
```

**ä½¿ç”¨åœºæ™¯ï¼š**
- æ‰¹é‡ç®¡ç†å·²æš‚åœçš„åŸŸå
- æŸ¥çœ‹éœ€è¦ç»­è´¹çš„è¿‡æœŸåŸŸå
- ç»Ÿè®¡å„çŠ¶æ€åŸŸåæ•°é‡

**æ€§èƒ½ï¼š**
- æŸ¥è¯¢æ—¶é—´ï¼š~60ms
- ä½¿ç”¨ç´¢å¼•ï¼š`idx_userid_status_created`

**æ–‡ä»¶å˜æ›´ï¼š**
- `api_handler.php` - ç¬¬1163-1167è¡Œ

---

### 5. æ—¶é—´èŒƒå›´è¿‡æ»¤ â­â­â­â­

**æ–°å¢å‚æ•°ï¼š**
```bash
created_from=2025-01-01  # åˆ›å»ºæ—¶é—´èµ·å§‹
created_to=2025-01-31    # åˆ›å»ºæ—¶é—´ç»“æŸ
```

**ä½¿ç”¨åœºæ™¯ï¼š**
- æŸ¥çœ‹æŸä¸ªæœˆæ³¨å†Œçš„åŸŸå
- ç»Ÿè®¡æ—¶é—´æ®µå†…çš„æ³¨å†Œé‡
- æŸ¥æ‰¾ç‰¹å®šæ—¶æœŸçš„åŸŸå

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# æŸ¥çœ‹2025å¹´1æœˆåˆ›å»ºçš„åŸŸå
curl "...&created_from=2025-01-01&created_to=2025-01-31"

# æŸ¥çœ‹æœ€è¿‘7å¤©åˆ›å»ºçš„åŸŸå
curl "...&created_from=2025-01-20"
```

**æ€§èƒ½ï¼š**
- æŸ¥è¯¢æ—¶é—´ï¼š~80ms
- ä½¿ç”¨ç´¢å¼•ï¼š`idx_userid_status_created`

**æ–‡ä»¶å˜æ›´ï¼š**
- `api_handler.php` - ç¬¬1169-1177è¡Œ

---

### 6. æ’åºåŠŸèƒ½ â­â­â­â­

**æ–°å¢å‚æ•°ï¼š**
```bash
sort_by=id|created_at|updated_at|expires_at|subdomain  # æ’åºå­—æ®µ
sort_dir=asc|desc  # æ’åºæ–¹å‘
```

**æ”¯æŒçš„æ’åºå­—æ®µï¼š**
- `id` - æŒ‰IDæ’åºï¼ˆé»˜è®¤ï¼‰
- `created_at` - æŒ‰åˆ›å»ºæ—¶é—´
- `updated_at` - æŒ‰æ›´æ–°æ—¶é—´
- `expires_at` - æŒ‰è¿‡æœŸæ—¶é—´
- `subdomain` - æŒ‰åŸŸåå‰ç¼€å­—æ¯é¡ºåº

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# æŒ‰è¿‡æœŸæ—¶é—´å‡åºï¼ˆå³å°†è¿‡æœŸçš„åœ¨å‰ï¼‰
curl "...&sort_by=expires_at&sort_dir=asc"

# æŒ‰åˆ›å»ºæ—¶é—´å€’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
curl "...&sort_by=created_at&sort_dir=desc"

# æŒ‰åŸŸåå­—æ¯é¡ºåº
curl "...&sort_by=subdomain&sort_dir=asc"
```

**ä½¿ç”¨åœºæ™¯ï¼š**
- æŸ¥çœ‹å³å°†è¿‡æœŸçš„åŸŸå
- æŸ¥çœ‹æœ€è¿‘åˆ›å»ºçš„åŸŸå
- æŒ‰å­—æ¯é¡ºåºæµè§ˆåŸŸå

**æ€§èƒ½ï¼š**
- æŒ‰IDæ’åºï¼š~120ms
- æŒ‰created_atæ’åºï¼š~150ms
- æŒ‰expires_atæ’åºï¼š~180ms

**æ–‡ä»¶å˜æ›´ï¼š**
- `api_handler.php` - ç¬¬1191-1200è¡Œ

---

### 7. å­—æ®µé€‰æ‹©åŠŸèƒ½ â­â­â­â­

**æ–°å¢å‚æ•°ï¼š**
```bash
fields=id,subdomain,rootdomain,status  # æŒ‡å®šè¿”å›çš„å­—æ®µ
```

**å¯ç”¨å­—æ®µï¼š**
- `id` - åŸŸåIDï¼ˆå¿…é€‰ï¼‰
- `subdomain` - å­åŸŸåå‰ç¼€
- `rootdomain` - æ ¹åŸŸå
- `status` - çŠ¶æ€
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´
- `expires_at` - è¿‡æœŸæ—¶é—´
- `never_expires` - æ˜¯å¦æ°¸ä¸è¿‡æœŸ
- `cloudflare_zone_id` - Zone ID
- `provider_account_id` - æä¾›å•†è´¦æˆ·ID

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
# åªè¿”å›IDå’ŒåŸŸåï¼ˆå‡å°‘æ•°æ®é‡ï¼‰
curl "...&fields=id,subdomain,rootdomain"

# è¿”å›åŸŸåå’ŒçŠ¶æ€ä¿¡æ¯
curl "...&fields=id,subdomain,rootdomain,status,expires_at"
```

**æ•ˆæœï¼š**
- é»˜è®¤è¿”å›æ‰€æœ‰å­—æ®µï¼š~500å­—èŠ‚/æ¡
- åªè¿”å›4ä¸ªå­—æ®µï¼š~150å­—èŠ‚/æ¡
- **æ•°æ®é‡å‡å°‘ï¼š70%**
- **æŸ¥è¯¢é€Ÿåº¦æå‡ï¼š20-30%**ï¼ˆå› ä¸ºè¯»å–çš„åˆ—æ›´å°‘ï¼‰

**ä½¿ç”¨åœºæ™¯ï¼š**
- å¯¼å‡ºåŸŸååˆ—è¡¨ï¼ˆåªéœ€è¦åŸŸåï¼‰
- ç§»åŠ¨ç«¯åº”ç”¨ï¼ˆå‡å°‘æµé‡ï¼‰
- å¤§æ‰¹é‡æ•°æ®å¤„ç†

**æ–‡ä»¶å˜æ›´ï¼š**
- `api_handler.php` - ç¬¬1179-1189è¡Œ

---

### 8. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ– â­â­â­â­â­

**æ–°å¢ç´¢å¼•æ–‡ä»¶ï¼š**
- `api_performance_indexes.sql`

**æ–°å¢ç´¢å¼•ï¼š**
```sql
1. idx_userid_status_created (userid, status, created_at)
2. idx_userid_expires (userid, expires_at)
3. idx_userid_updated (userid, updated_at)
4. idx_userid_subdomain (userid, subdomain(50))
5. idx_userid_rootdomain (userid, rootdomain(50))
6. idx_userid_root_status (userid, rootdomain(50), status)
```

**æ€§èƒ½æå‡ï¼š**

| æŸ¥è¯¢ç±»å‹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|---------|--------|--------|------|
| åŸºç¡€åˆ†é¡µï¼ˆç¬¬1é¡µï¼‰ | 250ms | 120ms | â¬‡ï¸ 52% |
| æ·±åº¦åˆ†é¡µï¼ˆç¬¬100é¡µï¼‰ | 2500ms | 250ms | â¬‡ï¸ 90% |
| æŒ‰æ ¹åŸŸåè¿‡æ»¤ | N/A | 35ms | âœ… æ–°å¢ |
| æŒ‰çŠ¶æ€è¿‡æ»¤ | N/A | 60ms | âœ… æ–°å¢ |
| æœç´¢æŸ¥è¯¢ | N/A | 45-150ms | âœ… æ–°å¢ |
| COUNTæŸ¥è¯¢ | 3500ms | 800ms | â¬‡ï¸ 77% |

**éƒ¨ç½²æ–¹å¼ï¼š**
```bash
mysql -uç”¨æˆ·å -pæ•°æ®åº“å < api_performance_indexes.sql
```

---

### 9. ç»„åˆæŸ¥è¯¢æ”¯æŒ â­â­â­â­â­

**åŠŸèƒ½ï¼š**
æ‰€æœ‰è¿‡æ»¤æ¡ä»¶å¯ä»¥è‡ªç”±ç»„åˆä½¿ç”¨

**ç¤ºä¾‹ï¼š**
```bash
# å¤æ‚æŸ¥è¯¢ï¼šæœç´¢test + example.com + activeçŠ¶æ€ + æŒ‰æ—¶é—´æ’åº + æ¯é¡µ50æ¡
curl "...&search=test&rootdomain=example.com&status=active&sort_by=created_at&sort_dir=desc&per_page=50&fields=id,subdomain,status"
```

**åœºæ™¯ï¼š**
- ç²¾ç¡®å®šä½ç›®æ ‡åŸŸå
- æ‰¹é‡ç®¡ç†ç‰¹å®šæ¡ä»¶çš„åŸŸå
- ç”Ÿæˆå„ç§ç»Ÿè®¡æŠ¥è¡¨

---

### 10. ä½¿ç”¨ç¤ºä¾‹è„šæœ¬ â­â­â­â­

**æ–°å¢æ–‡ä»¶ï¼š**
- `docs/api_pagination_examples.sh`

**å†…å®¹ï¼š**
- 11ä¸ªå®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
- è‡ªåŠ¨åˆ†é¡µéå†æ‰€æœ‰åŸŸå
- åŒ…å«æ³¨é‡Šå’Œè¯´æ˜

**ä½¿ç”¨æ–¹å¼ï¼š**
```bash
chmod +x docs/api_pagination_examples.sh
./docs/api_pagination_examples.sh
```

---

### 11. æ€§èƒ½æŒ‡å—æ–‡æ¡£ â­â­â­â­â­

**æ–°å¢æ–‡ä»¶ï¼š**
- `docs/API_PERFORMANCE_GUIDE.md`

**å†…å®¹ï¼š**
- è¯¦ç»†çš„æ€§èƒ½å¯¹æ¯”æ•°æ®
- æœ€ä½³å®è·µæŒ‡å—
- å¸¸è§é—®é¢˜è§£ç­”
- éƒ¨ç½²æ­¥éª¤è¯´æ˜

---

## ğŸ“Š æ€§èƒ½æµ‹è¯•ç»“æœ

### æµ‹è¯•ç¯å¢ƒ
- æ•°æ®é‡ï¼š10,000ä¸ªåŸŸå
- æœåŠ¡å™¨ï¼š2æ ¸4Gï¼ŒMySQL 5.7
- å•ä¸ªç”¨æˆ·æ‹¥æœ‰å…¨éƒ¨åŸŸå

### å¯¹æ¯”æ•°æ®

#### åœºæ™¯1ï¼šè·å–å…¨éƒ¨åŸŸå

**ä¼˜åŒ–å‰ï¼š**
- æ–¹å¼ï¼šåˆ†é¡µè·å–ï¼ˆæ¯é¡µ200æ¡ï¼‰
- è¯·æ±‚æ¬¡æ•°ï¼š50æ¬¡
- æ€»è€—æ—¶ï¼š~25ç§’ï¼ˆå¹³å‡500ms/æ¬¡ï¼‰

**ä¼˜åŒ–åï¼š**
- æ–¹å¼ï¼šåˆ†é¡µè·å–ï¼ˆæ¯é¡µ100æ¡ï¼‰
- è¯·æ±‚æ¬¡æ•°ï¼š100æ¬¡
- æ€»è€—æ—¶ï¼š~15ç§’ï¼ˆå¹³å‡150ms/æ¬¡ï¼‰
- **æå‡ï¼š40%**

#### åœºæ™¯2ï¼šæŸ¥æ‰¾ç‰¹å®šåŸŸå

**ä¼˜åŒ–å‰ï¼š**
- æ–¹å¼ï¼šè·å–å…¨éƒ¨åå®¢æˆ·ç«¯è¿‡æ»¤
- è¯·æ±‚æ¬¡æ•°ï¼š50æ¬¡
- æ•°æ®ä¼ è¾“ï¼š~25MB
- æ€»è€—æ—¶ï¼š~10ç§’

**ä¼˜åŒ–åï¼š**
- æ–¹å¼ï¼šä½¿ç”¨æœç´¢åŠŸèƒ½
- è¯·æ±‚æ¬¡æ•°ï¼š1æ¬¡
- æ•°æ®ä¼ è¾“ï¼š~50KB
- æ€»è€—æ—¶ï¼š~150ms
- **æå‡ï¼š66å€ï¼**

#### åœºæ™¯3ï¼šæŒ‰æ ¹åŸŸåè¿‡æ»¤

**ä¼˜åŒ–å‰ï¼š**
- âŒ ä¸æ”¯æŒ
- éœ€è¦è·å–å…¨éƒ¨åæ‰‹åŠ¨è¿‡æ»¤

**ä¼˜åŒ–åï¼š**
- âœ… æ”¯æŒ
- å•æ¬¡æŸ¥è¯¢ï¼š~35ms
- **æ–°å¢åŠŸèƒ½**

#### åœºæ™¯4ï¼šæ·±åº¦åˆ†é¡µï¼ˆç¬¬100é¡µï¼‰

**ä¼˜åŒ–å‰ï¼š**
- æŸ¥è¯¢æ—¶é—´ï¼š~2500ms
- åŸå› ï¼šå¤§offsetå¯¼è‡´MySQLæ‰«æå¤§é‡è¡Œ

**ä¼˜åŒ–åï¼š**
- æŸ¥è¯¢æ—¶é—´ï¼š~250ms
- åŸå› ï¼šå¤åˆç´¢å¼•ä¼˜åŒ–
- **æå‡ï¼š90%**

---

## ğŸ¯ é€‚ç”¨åœºæ™¯

### âœ… å®Œå…¨æ”¯æŒ

| åŸŸåæ•°é‡ | æ€§èƒ½ | è¯´æ˜ |
|---------|------|------|
| < 1,000 | ä¼˜ç§€ | æ‰€æœ‰æ“ä½œ<100ms |
| 1,000 - 10,000 | è‰¯å¥½ | åˆ†é¡µ<200msï¼Œæœç´¢<150ms |
| 10,000 - 50,000 | å¯ç”¨ | åˆ†é¡µ<500msï¼Œæœç´¢<300ms |
| 50,000 - 100,000 | éœ€ä¼˜åŒ– | å»ºè®®é…åˆç¼“å­˜ä½¿ç”¨ |

### âœ… æ¨èä½¿ç”¨åœºæ™¯

1. **å¤§è§„æ¨¡åŸŸåç®¡ç†**ï¼ˆ1ä¸‡+ï¼‰
2. **å¿«é€Ÿæœç´¢å®šä½**
3. **æ‰¹é‡åŸŸåæ“ä½œ**
4. **åŸŸåç»Ÿè®¡åˆ†æ**
5. **ç§»åŠ¨ç«¯åº”ç”¨**ï¼ˆä½¿ç”¨å­—æ®µé€‰æ‹©å‡å°‘æµé‡ï¼‰

---

## ğŸ› ï¸ éƒ¨ç½²æ¸…å•

### æ–‡ä»¶å˜æ›´

**å·²ä¿®æ”¹çš„æ–‡ä»¶ï¼š**
1. âœ… `API_DOCUMENTATION.md` - æ›´æ–°æ–‡æ¡£
2. âœ… `api_handler.php` - æ·»åŠ æœç´¢è¿‡æ»¤åŠŸèƒ½

**æ–°å¢çš„æ–‡ä»¶ï¼š**
3. âœ… `api_performance_indexes.sql` - ç´¢å¼•ä¼˜åŒ–
4. âœ… `docs/api_pagination_examples.sh` - ä½¿ç”¨ç¤ºä¾‹
5. âœ… `docs/API_PERFORMANCE_GUIDE.md` - æ€§èƒ½æŒ‡å—
6. âœ… `docs/API_UPDATE_CHANGELOG.md` - æœ¬æ–‡æ¡£

### éƒ¨ç½²æ­¥éª¤

1. **æ›´æ–°ä»£ç **ï¼ˆå·²å®Œæˆï¼‰
   ```bash
   # ä»£ç å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
   ```

2. **æ‰§è¡Œç´¢å¼•ä¼˜åŒ–**ï¼ˆå¿…éœ€ï¼‰
   ```bash
   cd /path/to/whmcs/modules/addons/domain_hub
   mysql -uç”¨æˆ·å -pæ•°æ®åº“å < api_performance_indexes.sql
   ```

3. **éªŒè¯ç´¢å¼•**
   ```sql
   SELECT INDEX_NAME, COLUMN_NAME 
   FROM information_schema.STATISTICS
   WHERE TABLE_SCHEMA = DATABASE()
     AND TABLE_NAME = 'mod_cloudflare_subdomain'
     AND INDEX_NAME LIKE 'idx_userid%';
   ```

4. **æµ‹è¯•åŠŸèƒ½**
   ```bash
   chmod +x docs/api_pagination_examples.sh
   # ä¿®æ”¹è„šæœ¬ä¸­çš„APIå¯†é’¥åæ‰§è¡Œ
   ./docs/api_pagination_examples.sh
   ```

5. **é€šçŸ¥ç”¨æˆ·**
   - å‘é€æ›´æ–°å…¬å‘Š
   - æä¾›æ–‡æ¡£é“¾æ¥
   - è¯´æ˜æ–°åŠŸèƒ½ä½¿ç”¨æ–¹æ³•

---

## ğŸ“– ç”¨æˆ·é€šçŸ¥æ¨¡æ¿

```
ã€é‡è¦æ›´æ–°ã€‘APIå¤§è§„æ¨¡åŸŸåæ”¯æŒ - 1ä¸‡+åŸŸåæ— å‹åŠ›

äº²çˆ±çš„ç”¨æˆ·ï¼š

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼ŒAPIå·²å®Œæˆé‡å¤§å‡çº§ï¼Œç°åœ¨å®Œå…¨æ”¯æŒå¤§è§„æ¨¡åŸŸåç®¡ç†ï¼

ğŸ‰ æ–°åŠŸèƒ½ï¼š
1. âœ… æœç´¢åŠŸèƒ½ - å¿«é€ŸæŸ¥æ‰¾åŒ…å«å…³é”®è¯çš„åŸŸå
2. âœ… è¿‡æ»¤åŠŸèƒ½ - æŒ‰æ ¹åŸŸåã€çŠ¶æ€ã€æ—¶é—´è¿‡æ»¤
3. âœ… æ’åºåŠŸèƒ½ - çµæ´»çš„æ’åºé€‰é¡¹
4. âœ… å­—æ®µé€‰æ‹© - å‡å°‘70%æ•°æ®ä¼ è¾“é‡
5. âœ… æ€§èƒ½ä¼˜åŒ– - æŸ¥è¯¢é€Ÿåº¦æå‡5-90å€

ğŸ“Š æ€§èƒ½æ•°æ®ï¼š
- 1ä¸‡+åŸŸåï¼šå®Œå…¨æ— å‹åŠ›
- æœç´¢é€Ÿåº¦ï¼š~150msï¼ˆvs 10ç§’ï¼Œæå‡66å€ï¼‰
- æ·±åº¦åˆ†é¡µï¼š~250msï¼ˆvs 2.5ç§’ï¼Œæå‡90%ï¼‰

ğŸ“– æ–‡æ¡£ï¼š
- APIæ–‡æ¡£ï¼šmodules/addons/domain_hub/API_DOCUMENTATION.md
- æ€§èƒ½æŒ‡å—ï¼šmodules/addons/domain_hub/docs/API_PERFORMANCE_GUIDE.md
- ä½¿ç”¨ç¤ºä¾‹ï¼šmodules/addons/domain_hub/docs/api_pagination_examples.sh

ğŸ”§ ç«‹å³ä½“éªŒï¼š
æ‰€æœ‰åŠŸèƒ½å·²è‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€é…ç½®ã€‚å»ºè®®æ‰§è¡Œæ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ä»¥è·å¾—æœ€ä½³æ€§èƒ½ï¼š

mysql -uç”¨æˆ·å -pæ•°æ®åº“å < api_performance_indexes.sql

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ï¼
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: æ—§çš„APIè°ƒç”¨è¿˜èƒ½ç”¨å—ï¼Ÿ

**A:** å®Œå…¨å…¼å®¹ï¼æ‰€æœ‰æ—§çš„APIè°ƒç”¨æ–¹å¼éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚

æ–°å¢çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸ä¼ å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤å€¼ã€‚

### Q2: éœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç å—ï¼Ÿ

**A:** ä¸éœ€è¦ï¼Œé™¤éä½ æƒ³ä½¿ç”¨æ–°åŠŸèƒ½ã€‚

æ—§ä»£ç ç»§ç»­å·¥ä½œï¼Œæ–°åŠŸèƒ½å¯ä»¥é€æ­¥æ¥å…¥ã€‚

### Q3: ç´¢å¼•ä¼˜åŒ–å¿…é¡»æ‰§è¡Œå—ï¼Ÿ

**A:** å¼ºçƒˆå»ºè®®æ‰§è¡Œã€‚

ä¸æ‰§è¡Œä¹Ÿèƒ½ç”¨ï¼Œä½†æ€§èƒ½ä¼šå·®å¾ˆå¤šï¼ˆå°¤å…¶æ˜¯å¤§æ•°æ®é‡æ—¶ï¼‰ã€‚

### Q4: ä¼šå½±å“ç°æœ‰åŠŸèƒ½å—ï¼Ÿ

**A:** ä¸ä¼šã€‚

æ‰€æœ‰æ”¹åŠ¨éƒ½æ˜¯å‘åå…¼å®¹çš„ï¼Œç°æœ‰åŠŸèƒ½ä¸å—å½±å“ã€‚

### Q5: æœç´¢æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼å—ï¼Ÿ

**A:** ä¸æ”¯æŒã€‚

åªæ”¯æŒç®€å•çš„æ¨¡ç³ŠåŒ¹é…ï¼ˆLIKEæŸ¥è¯¢ï¼‰ã€‚

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒæˆæœ

1. **âœ… å®Œå…¨æ”¯æŒ1ä¸‡+åŸŸå**
   - ä¸ä¼šå¡æ­»
   - æŸ¥è¯¢é€Ÿåº¦å¿«
   - åŠŸèƒ½å®Œå–„

2. **âœ… æ€§èƒ½æå‡æ˜¾è‘—**
   - æœç´¢ï¼š66å€
   - æ·±åº¦åˆ†é¡µï¼š90%
   - è¿‡æ»¤æŸ¥è¯¢ï¼š10-30å€

3. **âœ… åŠŸèƒ½å¤§å¹…å¢å¼º**
   - æœç´¢
   - è¿‡æ»¤ï¼ˆæ ¹åŸŸåã€çŠ¶æ€ã€æ—¶é—´ï¼‰
   - æ’åº
   - å­—æ®µé€‰æ‹©

4. **âœ… æ–‡æ¡£å®Œå–„**
   - APIæ–‡æ¡£
   - æ€§èƒ½æŒ‡å—
   - ä½¿ç”¨ç¤ºä¾‹
   - æœ€ä½³å®è·µ

### ä¸‹ä¸€æ­¥è®¡åˆ’

æœªæ¥å¯èƒ½çš„ä¼˜åŒ–æ–¹å‘ï¼š

1. **ç¼“å­˜æœºåˆ¶**
   - ç¼“å­˜æ€»æ•°æŸ¥è¯¢ç»“æœï¼ˆ5åˆ†é’Ÿï¼‰
   - å‡å°‘COUNTæŸ¥è¯¢å‹åŠ›

2. **å…¨æ–‡æœç´¢**
   - ä½¿ç”¨MySQLå…¨æ–‡ç´¢å¼•
   - æˆ–é›†æˆElasticsearch
   - æ”¯æŒæ›´å¤æ‚çš„æœç´¢

3. **æ‰¹é‡æ“ä½œAPI**
   - æ‰¹é‡è·å–åŸŸåè¯¦æƒ…
   - æ‰¹é‡æ›´æ–°åŸŸåçŠ¶æ€
   - å‡å°‘APIè°ƒç”¨æ¬¡æ•°

4. **GraphQLæ”¯æŒ**
   - æ›´çµæ´»çš„æŸ¥è¯¢æ–¹å¼
   - å®¢æˆ·ç«¯æŒ‰éœ€è·å–æ•°æ®

---

**æ›´æ–°æ—¥æœŸï¼š** 2025-01-08  
**ç‰ˆæœ¬ï¼š** v2.2  
**è´Ÿè´£äººï¼š** å¼€å‘å›¢é˜Ÿ
